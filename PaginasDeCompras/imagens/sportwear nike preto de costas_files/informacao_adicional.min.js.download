var InformacaoAdicional={params:null,dados:null,calculaPrecoProduto:function(a,o){if("undefined"==typeof o&&(o=parseFloat(jQuery("#preco_atual").val())),variacao_id=jQuery("#variacao").val()||jQuery("#selectedVariant").val(),variacao_id=parseInt(variacao_id),total=o,jQuery(".informacoesAdicionais").each(function(a,o){informacao_adicional=InformacaoAdicional.dados["ia"+jQuery(o).val()],informacao_value=jQuery("#infoAdicional_"+jQuery(o).val()).val(),quantity=1,"undefined"!=typeof informacao_adicional.quantity&&(quantity=informacao_adicional.quantity),valor=!1,1==informacao_adicional.tipo?""!=informacao_value&&null!=informacao_value&&(informacao_value=informacao_value.split(":")[1],valor="undefined"!=typeof informacao_adicional.opcoes["opt"+informacao_value].valor_calculado?informacao_adicional.opcoes["opt"+informacao_value].valor_calculado:informacao_adicional.opcoes["opt"+informacao_value].valor):""!=informacao_value&&(valor="undefined"!=typeof informacao_adicional.valor_calculado?informacao_adicional.valor_calculado:informacao_adicional.valor),valor!==!1&&(1==informacao_adicional.somar_total?total+=parseFloat(valor):total=parseFloat(valor))}),"undefined"!=typeof a&&1==a)return total;total_formatado=number_format(total,2,",","."),total!==!1&&0!=total&&0!=total&&(jQuery("#variacaoPreco").html(total_formatado),o!=total&&jQuery("#info_preco").html("")),jQuery("#atualizaFormas").html('<img src="/assets/store/img/ajax-loading.gif" alt="Loading" title="Loading"/>&nbsp;Carregando Formas de Pagamento'),jQuery("#aba_formas").val(1);var l=jQuery('[data-tab-container-id="#formasPagto"]');l.length&&(l.attr("data-tab-url","abas_produto.php?loja="+this.params.loja+"&aba=formas&id_produto="+this.params.produto+"&preco_calculo="+total),-1!==l[0].parentElement.classList.value.indexOf("aberta")&&l.click()),jQuery("#detalhes_formas").load("detalhes_formas.php?loja="+this.params.loja+"&id_produto="+this.params.produto+"&preco_calculo="+total),jQuery("#linkPagParcelado").attr("href","pag_parcelado.php?IdProd="+this.params.produto+"&preco="+total+"&loja="+this.params.loja),limpa_erro_carrinho(),calculaBonusVariacao(this.params.calcularPontos,total_formatado,this.params.bonusValor)},principal:function(a){informacao_atual=this.dados["ia"+a],jQuery(informacao_atual.principais).each(function(a,o){informacao_principal=InformacaoAdicional.dados["ia"+o],elementoPrincipal=jQuery("#infoAdicional_"+o),liberaPrincipal=!0,relacionadas=[],jQuery(".relacionada_"+o).each(function(a,o){informacao_relacionada_id=jQuery(o).val(),valor=jQuery("#infoAdicional_"+informacao_relacionada_id).val(),1==InformacaoAdicional.dados["ia"+informacao_relacionada_id].tipo?0!=valor?relacionadas.push(valor):liberaPrincipal=!1:""!=valor?relacionadas.push(informacao_relacionada_id):liberaPrincipal=!1}),liberaPrincipal||1!=informacao_principal.tipo?(1==informacao_principal.tipo?(jQuery.each(informacao_principal.opcoes,function(a,l){valor_calculado=0,jQuery.each(relacionadas,function(a,i){i=i.split(":"),informacao_relacionada=InformacaoAdicional.dados["ia"+i[0]],valor=parseFloat("undefined"!=typeof i[1]?"undefined"!=typeof informacao_relacionada.opcoes["opt"+i[1]].valor_calculado?informacao_relacionada.opcoes["opt"+i[1]].valor_calculado:informacao_relacionada.opcoes["opt"+i[1]].valor:"undefined"!=typeof informacao_relacionada.valor_calculado?informacao_relacionada.valor_calculado:informacao_relacionada.valor),"x"==informacao_relacionada.acoes["acao"+o]?l.valor>0&&valor>0&&(valor_calculado+=parseFloat(l.valor)*valor):valor_calculado+=parseFloat(l.valor)+valor,InformacaoAdicional.dados["ia"+o].opcoes["opt"+l.id].valor_calculado=valor_calculado}),valor_calculado>0&&informacao_principal.exibir_valor&&(option_label=l.opcao+" (+ R$ "+number_format(valor_calculado,2,",",".")+")",jQuery("#option_"+o+"-"+l.id).html(option_label))}),elementoPrincipal.val(0)):(valor_calculado=0,jQuery.each(relacionadas,function(a,l){l=l.split(":"),informacao_relacionada=InformacaoAdicional.dados["ia"+l[0]],valor=parseFloat("undefined"!=typeof l[1]?"undefined"!=typeof informacao_relacionada.opcoes["opt"+l[1]].valor_calculado?informacao_relacionada.opcoes["opt"+l[1]].valor_calculado:informacao_relacionada.opcoes["opt"+l[1]].valor:"undefined"!=typeof informacao_relacionada.valor_calculado?informacao_relacionada.valor_calculado:informacao_relacionada.valor),"x"==informacao_relacionada.acoes["acao"+o]?informacao_principal.valor>0&&valor>0&&(valor_calculado+=parseFloat(informacao_principal.valor)*valor):valor_calculado+=parseFloat(informacao_principal.valor)+valor,InformacaoAdicional.dados["ia"+o].valor_calculado=valor_calculado}),jQuery("#valor_"+o).html(valor_calculado>0?number_format(valor_calculado,2,",","."):number_format(informacao_principal.valor,2,",",".")),elementoPrincipal.val("")),liberaPrincipal?elementoPrincipal.removeAttr("disabled"):(elementoPrincipal.attr("disabled","disabled"),"undefined"!=typeof informacao_principal.principais&&InformacaoAdicional.principal(o))):(1==informacao_principal.tipo?elementoPrincipal.val(0):(elementoPrincipal.val(""),jQuery("#restante_"+o).html("0")),elementoPrincipal.attr("disabled","disabled"),"undefined"!=typeof informacao_principal.principais&&InformacaoAdicional.principal(o)),1==jQuery("#infoAdicional_"+o).attr("exibicao")&&(jQuery("#infoAdicional_"+o).msDropDown().data("dd"),jQuery("#infoAdicional_"+o+"_child a").click(function(){InformacaoAdicional.calculaPrecoProduto()}))})}};
