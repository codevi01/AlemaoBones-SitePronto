function init(){var e,t=window.document.getElementById("TagEConfy"),n=window.document.getElementById("bannerEconfy"),i=window.document.getElementById("seloEconfy"),o=window.document.getElementsByClassName("banner")[0],r=getLightBoxElement(),a=getSeloScriptElement(),c=document.createElement("link"),d=document.createElement("meta"),l=document.createElement("div"),s=(viewport=document.querySelector("meta[name=viewport]"),c.rel="stylesheet",c.href="https://cdn.confi.com.vc/styles/getData.css",null==viewport&&(d.name="viewport",d.content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width",document.getElementsByTagName("head")[0].appendChild(d)),document.getElementsByTagName("head")[0].appendChild(c),null!=t&&(c=queryStringToJSON(d=decodeURI(t.value)),window.sentData||(sendCompra(c),hideTagEconfyValue(t),window.sentData=!0),""!==d)&&null!=d&&null!=n&&void 0!==n&&!window.includedEconfyLightBoxBanner&&r&&(window.includedEconfyLightBoxBanner=!0,d=getSurveyLink(c,1),n.href=d,n.target="_blank",r.lightbox?(l.classList.add("CCmodal-econfy"),l.setAttribute("id","CCmodal"),n.parentElement.appendChild(l),(r=document.createElement("img")).src="https://cdn.confi.com.vc/tag/l.gif",r.classList.add("CChover-shadow"),n.appendChild(r),r=document.createElement("div"),(e=document.createElement("span")).classList.add("CCclose"),e.innerText="X",r.appendChild(e),l.appendChild(r),l.appendChild(n),l.appendChild(t)):a&&"103312"==a.sellerId?n.innerHTML+='<img confi-img-type="fast-shop" src="https://cdn.confi.com.vc/banner/banner-fastShop.png"/>':a&&a.bannerImage?n.innerHTML+=`<img confi-img-type="dynamic" src="${a.bannerImage}"/>`:n.innerHTML+='<img confi-img-type="default" src="https://cdn.confi.com.vc/banner/b.gif"/>',""!==o&&null!=o&&(e=getSurveyLink(c),o.innerHTML+='<a id="bannerEconfyFooter" href="'+e+'"  target="_blank"><img style="margin-bottom: 1em;" src="https://cdn.confi.com.vc/banner/b.gif"></a > '),n.innerHTML+='<input id="confiSurveyUrl" type=hidden value ="'+d+'">'),document.body.contains(i)&&0==i.getElementsByTagName("img").length&&a&&(i.innerHTML+='<img src="https://cdn.confi.com.vc/reputation/'+a.sellerId+'.png"/>',i.href="https://confi.com.vc/app/lojas-confiaveis?id="+a.sellerId,!("false"===getCookie("seal_refresh")))&&(r="https://analytics-stamp.confi.com.vc/api/v1/stamp/"+a.sellerId,l=new XMLHttpRequest,t=new Date,(c=new Date).setDate(t.getDate()+10),document.cookie="seal_refresh=false; expires="+c.toGMTString(),l.open("GET",r),l.setRequestHeader("Content-Type","application/json"),l.send()),document.getElementsByClassName("CCclose")[0]),m=document.getElementById("CCmodal");s&&(s.onclick=function(e){e.stopPropagation(),s.parentNode.removeChild(s),m.parentNode.removeChild(m)})}function sendCompra(e){var t;e&&e.orderID&&e.orderDate&&e.orderSellerID&&((t=new XMLHttpRequest).open("POST","https://services.confi.digital/tag/api/v1/tag",!0),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(e)))}function queryStringToJSON(e){var e=(e=-1<(e=e||"").indexOf("?")?e.split("?")[1]:e).split("&"),t={};return e.forEach(function(e){e=e.split("="),t[e[0]]=e[1]||""}),t}function getLightBoxElement(){for(var e=0;e<document.scripts.length;e++){var t,n=document.scripts[e];if(n&&n.getAttribute("id"))if("getdata"==n.getAttribute("id").toLowerCase()&&0<n.src.toLowerCase().indexOf("lightbox"))return n=n.src.split("?")[1].split("&"),(t={}).sellerId=n[0],t.lightbox=0<n[1].indexOf("true"),t}}function getSeloScriptElement(){for(var e=0;e<document.scripts.length;e++){var n=document.scripts[e];if(n&&n.getAttribute("id")&&("getdata"==n.getAttribute("id").toLowerCase()&&0<n.src.toLowerCase().indexOf("sellerid"))){n=n.src.split("?")[1].split("&");let t={};return n.forEach(e=>{t[e.split("=")[0]]=e.split("=")[1]}),t}}}function hideTagEconfyValue(e){e&&(e.value=encode(e.value))}function getSurveyLink(e,t){if(e)return e={seller_id:e.orderSellerID,step:1,cpf:e.billingCPF,email:e.billingEmail,order_guid:e.orderID,origin_id:3},t&&(e.integration_type=t),"https://pesquisa.confi.com.vc/survey/p="+encode(JSON.stringify(e))}function encode(e){if(e)return btoa(unescape(encodeURIComponent(e)))}function getCookie(e){var n=e+"=",i=decodeURIComponent(document.cookie).split(";");for(let t=0;t<i.length;t++){let e=i[t];for(;" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(n))return e.substring(n.length,e.length)}return""}init();